<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="generator" content="Doxygen 1.8.15"/>
  <title>Wireless - Harmony 3: registerSocketCallback</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="customstylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
 <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
 <div id="titlearea">
 <table cellspacing="0" cellpadding="0">
 <tbody>
   <tr style="height: 56px;vertical-align: text-bottom;">
    <td style="padding: 0.2em 0.5em 0.1em 0.5em;">
	  <a id="projectlogo"><img alt="Logo" src="Microchip_logo.png"/> </a> </td>
     <td style="padding-right: 1em;">
       <span id="projectname"/> <class="stringliteral">Wireless - Harmony 3 </span>
     </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">registerSocketCallback<div class="ingroups"><a class="el" href="group___socket_header.html">Socket</a> &#124; <a class="el" href="group___s_o_c_k_e_t_a_p_i.html">SOCKET</a> &raquo; <a class="el" href="group___socket_a_p_i.html">Function</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaaf3c2b90b9ed63c030f688d08552bc8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___socket_callback_fn.html#gaaf3c2b90b9ed63c030f688d08552bc8b">registerSocketCallback</a> (<a class="el" href="group___socket_callbacks.html#ga4e44d5f60b283a88f33e03143f1dc80f">tpfAppSocketCb</a> socket_cb, <a class="el" href="group___socket_callbacks.html#gac7172c63794d223590ca1bbe23f0f267">tpfAppResolveCb</a> resolve_cb)</td></tr>
<tr class="separator:gaaf3c2b90b9ed63c030f688d08552bc8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga86726c2a073c674958c6777e348bb3e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___socket_callback_fn.html#ga86726c2a073c674958c6777e348bb3e0">registerSocketEventCallback</a> (<a class="el" href="group___socket_callbacks.html#ga4e44d5f60b283a88f33e03143f1dc80f">tpfAppSocketCb</a> socket_cb)</td></tr>
<tr class="separator:ga86726c2a073c674958c6777e348bb3e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a1dcb1448dc567e8cc3f1c0c8856b9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___socket_callback_fn.html#ga8a1dcb1448dc567e8cc3f1c0c8856b9f">registerSocketResolveCallback</a> (<a class="el" href="group___socket_callbacks.html#gac7172c63794d223590ca1bbe23f0f267">tpfAppResolveCb</a> resolve_cb)</td></tr>
<tr class="separator:ga8a1dcb1448dc567e8cc3f1c0c8856b9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Register two callback functions one for asynchronous socket events and the other one for DNS callback registering function. The registered callback functions are used to retrieve information in response to the asynchronous socket functions called. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaaf3c2b90b9ed63c030f688d08552bc8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaf3c2b90b9ed63c030f688d08552bc8b">&#9670;&nbsp;</a></span>registerSocketCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void registerSocketCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___socket_callbacks.html#ga4e44d5f60b283a88f33e03143f1dc80f">tpfAppSocketCb</a>&#160;</td>
          <td class="paramname"><em>socket_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___socket_callbacks.html#gac7172c63794d223590ca1bbe23f0f267">tpfAppResolveCb</a>&#160;</td>
          <td class="paramname"><em>resolve_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket_cb</td><td>tpfAppSocketCb Assignment of callback function to the global callback <a class="el" href="group___socket_callbacks.html#ga4e44d5f60b283a88f33e03143f1dc80f">tpfAppSocketCb</a> gpfAppSocketCb. Delivers socket messages to the host application. In response to the asynchronous function calls, such as <a class="el" href="group___bind_fn.html#bind">example</a> <a class="el" href="group___listen_fn.html#listen">example</a> <a class="el" href="group___accept_fn.html#ga0f9d8979ab7f59930f48fe680a383336">accept</a> <a class="el" href="group___connect_fn.html#connect">example</a></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resolve_cb</td><td>tpfAppResolveCb Assignment of callback function to the global callback <a class="el" href="group___socket_callbacks.html#gac7172c63794d223590ca1bbe23f0f267">tpfAppResolveCb</a> gpfAppResolveCb. Used for DNS resolving functionalities. The DNS resolving technique is determined by the application registering the callback. NULL is assigned when, DNS resolution is not required.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>If any of the socket functionalities is not to be used, NULL is passed in as a parameter. It must be invoked after socketinit and before other socket layer operations.</dd></dl>
<h1><a class="anchor" id="registerSocketCallback"></a>
example</h1>
<p>This example demonstrates the use of the registerSocketCallback to register a socket callback function with DNS resolution CB set to null for a simple UDP server example. </p><div class="fragment"><div class="line"><a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div><div class="line"><a class="code" href="structtstr_network_id.html">tstrNetworkId</a>       strNetworkId;</div><div class="line"><a class="code" href="structtstr_auth_psk.html">tstrAuthPsk</a>         strAuthPsk;</div><div class="line">int8_t ret;</div><div class="line"><span class="keyword">struct </span><a class="code" href="structsockaddr__in.html">sockaddr_in</a> addr;</div><div class="line"></div><div class="line"><span class="comment">// Initialize the board</span></div><div class="line">system_init();</div><div class="line"></div><div class="line"><span class="comment">//Initialize the UART console.</span></div><div class="line">configure_console();</div><div class="line"></div><div class="line"><span class="comment">// Initialize the BSP.</span></div><div class="line">nm_bsp_init();</div><div class="line"></div><div class="line"><span class="comment">// Initialize socket address structure.</span></div><div class="line">addr.sin_family = <a class="code" href="group___i_p_defines.html#ga9930604d0e32588eae76f43ca38e7826">AF_INET</a>;</div><div class="line">addr.sin_port = <a class="code" href="group___socket_defines.html#ga9778d254871cabab2da84409f88aa1f4">_htons</a>(MAIN_WIFI_M2M_SERVER_PORT);</div><div class="line">addr.sin_addr.s_addr = <a class="code" href="group___socket_defines.html#gad689dd88d15e087980c0b1ed71c29a42">_htonl</a>(MAIN_WIFI_M2M_SERVER_IP);</div><div class="line"></div><div class="line"><span class="comment">// Initialize Wi-Fi parameters structure.</span></div><div class="line">memset((uint8_t *)&amp;param, 0, <span class="keyword">sizeof</span>(<a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>));</div><div class="line"></div><div class="line"><span class="comment">// Initialize Wi-Fi driver with data and status callbacks.</span></div><div class="line">param.pfAppWifiCb = wifi_cb;</div><div class="line">ret = <a class="code" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param);</div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> != ret) {</div><div class="line">    printf(<span class="stringliteral">&quot;main: m2m_wifi_init call error!(%d)\r\n&quot;</span>, ret);</div><div class="line">    <span class="keywordflow">while</span> (1) {</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Initialize socket module</span></div><div class="line"><a class="code" href="group___socket_initialization_fn.html#gadc1a241370d03a56c23bfb9ad8407ca2">socketInit</a>();</div><div class="line"><a class="code" href="group___socket_callback_fn.html#gaaf3c2b90b9ed63c030f688d08552bc8b">registerSocketCallback</a>(socket_cb, NULL);</div><div class="line"></div><div class="line"><span class="comment">// Connect to router.</span></div><div class="line">strNetworkId.<a class="code" href="structtstr_network_id.html#a42ae53b909fdf9fd820f585e43af3684">pu8Bssid</a> = NULL;</div><div class="line">strNetworkId.<a class="code" href="structtstr_network_id.html#a27511d3ec4f64d5468c4ba16ab35202f">pu8Ssid</a> = MAIN_WLAN_SSID;</div><div class="line">strNetworkId.<a class="code" href="structtstr_network_id.html#abae02d3da1db28d70939b1e9df05c21f">u8SsidLen</a> = <span class="keyword">sizeof</span>(MAIN_WLAN_SSID);</div><div class="line">strNetworkId.u8Channel = <a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>;</div><div class="line"></div><div class="line">strAuthPsk.<a class="code" href="structtstr_auth_psk.html#a8d52b0f260f033cd02a397d54461605b">pu8Psk</a> = NULL;</div><div class="line">strAuthPsk.<a class="code" href="structtstr_auth_psk.html#a922b4265a78b16a0d7d9215ef6f89f26">pu8Passphrase</a> = MAIN_WLAN_PSK;</div><div class="line">strAuthPsk.<a class="code" href="structtstr_auth_psk.html#ab8937ae7cd0bf98711aceee893ff3cdd">u8PassphraseLen</a> = (uint8_t)strlen((<span class="keywordtype">char</span>*)MAIN_WLAN_PSK);</div><div class="line"></div><div class="line"><a class="code" href="group___w_l_a_n_a_p_i.html#gaa131b2fb19e32077923852539b807a84">m2m_wifi_connect_psk</a>(<a class="code" href="group___wlan_enums.html#gga5669e8f0b3b645d5ece2519a33cf8c2ca6c7300873de793b2ca9342997d271ba7">WIFI_CRED_SAVE_ENCRYPTED</a>, &amp;strNetworkId, &amp;strAuthPsk);</div></div><!-- fragment --><p>Register two callback functions one for asynchronous socket events and the other one for DNS callback registering function. The registered callback functions are used to retrieve information in response to the asynchronous socket functions called. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket_cb</td><td>Assignment of callback function to the global callback <a class="el" href="group___socket_callbacks.html#ga4e44d5f60b283a88f33e03143f1dc80f">tpfAppSocketCb</a> gpfAppSocketCb. Delivers socket messages to the host application. In response to the asynchronous function calls, such as <a class="el" href="group___bind_fn.html#bind">example</a> <a class="el" href="group___listen_fn.html#listen">example</a> <a class="el" href="group___accept_fn.html#ga0f9d8979ab7f59930f48fe680a383336">accept</a> <a class="el" href="group___connect_fn.html#connect">example</a></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resolve_cb</td><td>Assignment of callback function to the global callback <a class="el" href="group___socket_callbacks.html#gac7172c63794d223590ca1bbe23f0f267">tpfAppResolveCb</a> gpfAppResolveCb. Used for DNS resolving functionality. The DNS resolving technique is determined by the application registering the callback. NULL is assigned when DNS resolution is not required.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>If any of the socket functionality is not to be used, NULL is passed in as a parameter. It must be invoked after <a class="el" href="group___socket_initialization_fn.html#gadc1a241370d03a56c23bfb9ad8407ca2">socketInit</a> and before other socket layer operations.</dd></dl>
<h1><a class="anchor" id="SocketExample2"></a>
Example</h1>
<p>This example demonstrates the use of the registerSocketCallback to register a socket callback function with DNS resolution CB set to null for a simple UDP server example. </p><div class="fragment"><div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a> param;</div><div class="line">int8_t ret;</div><div class="line"><span class="keyword">struct </span><a class="code" href="structsockaddr__in.html">sockaddr_in</a> addr;</div><div class="line"></div><div class="line"><span class="comment">// Initialize the board</span></div><div class="line">system_init();</div><div class="line"></div><div class="line"><span class="comment">//Initialize the UART console.</span></div><div class="line">configure_console();</div><div class="line"></div><div class="line"><span class="comment">// Initialize the BSP.</span></div><div class="line">nm_bsp_init();</div><div class="line"></div><div class="line"><span class="comment">// Initialize socket address structure.</span></div><div class="line">addr.sin_family = <a class="code" href="group___i_p_defines.html#ga9930604d0e32588eae76f43ca38e7826">AF_INET</a>;</div><div class="line">addr.sin_port = <a class="code" href="group___socket_defines.html#ga9778d254871cabab2da84409f88aa1f4">_htons</a>(MAIN_WIFI_M2M_SERVER_PORT);</div><div class="line">addr.sin_addr.s_addr = <a class="code" href="group___socket_defines.html#gad689dd88d15e087980c0b1ed71c29a42">_htonl</a>(MAIN_WIFI_M2M_SERVER_IP);</div><div class="line"></div><div class="line"><span class="comment">// Initialize Wi-Fi parameters structure.</span></div><div class="line">memset((uint8_t *)&amp;param, 0, <span class="keyword">sizeof</span>(<a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>));</div><div class="line"></div><div class="line"><span class="comment">// Initialize Wi-Fi driver with data and status callbacks.</span></div><div class="line">param.pfAppWifiCb = wifi_cb;</div><div class="line">ret = <a class="code" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param);</div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> != ret) {</div><div class="line">    printf(<span class="stringliteral">&quot;main: m2m_wifi_init call error!(%d)\r\n&quot;</span>, ret);</div><div class="line">    <span class="keywordflow">while</span> (1) {</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Initialize socket module</span></div><div class="line"><a class="code" href="group___socket_initialization_fn.html#gadc1a241370d03a56c23bfb9ad8407ca2">socketInit</a>();</div><div class="line"><a class="code" href="group___socket_callback_fn.html#gaaf3c2b90b9ed63c030f688d08552bc8b">registerSocketCallback</a>(socket_cb, NULL);</div><div class="line"></div><div class="line"><span class="comment">// Connect to router.</span></div><div class="line"><a class="code" href="group___w_l_a_n_a_p_i.html#ga39167bb6c3a20a24f46b387e7096d501">m2m_wifi_connect</a>((<span class="keywordtype">char</span> *)DEFAULT_SSID, <span class="keyword">sizeof</span>(DEFAULT_SSID), DEFAULT_AUTH, (<span class="keywordtype">char</span> *)DEFAULT_KEY, <a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div></div><!-- fragment --> 
</div>
</div>
<a id="ga86726c2a073c674958c6777e348bb3e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga86726c2a073c674958c6777e348bb3e0">&#9670;&nbsp;</a></span>registerSocketEventCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void registerSocketEventCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___socket_callbacks.html#ga4e44d5f60b283a88f33e03143f1dc80f">tpfAppSocketCb</a>&#160;</td>
          <td class="paramname"><em>socket_cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga8a1dcb1448dc567e8cc3f1c0c8856b9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8a1dcb1448dc567e8cc3f1c0c8856b9f">&#9670;&nbsp;</a></span>registerSocketResolveCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void registerSocketResolveCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___socket_callbacks.html#gac7172c63794d223590ca1bbe23f0f267">tpfAppResolveCb</a>&#160;</td>
          <td class="paramname"><em>resolve_cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer">
  <span class="stringliteral"> © 2019 Microchip Technology Inc. </span>
</body>
</html>
