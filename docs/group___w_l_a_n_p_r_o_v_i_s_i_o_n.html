<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="generator" content="Doxygen 1.8.16"/>
  <title>Harmony 3 : Wireless: Provisioning</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
  <link href="customstylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
 <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
 <div id="titlearea">
 <table cellspacing="0" cellpadding="0">
 <tbody>
   <tr style="height: 56px;vertical-align: text-bottom;">
    <td style="padding: 0.2em 0.5em 0.1em 0.5em;">
	  <a id="projectlogo"><img alt="Logo" src="Microchip_logo.png"/> </a> </td>
     <td style="padding-right: 1em;">
       <span id="projectname"/> <class="stringliteral">Harmony 3 : Wireless </span>
     </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Provisioning<div class="ingroups"><a class="el" href="group__m2m__wifi.html">WLAN</a> &raquo; <a class="el" href="group___w_l_a_n_a_p_i.html">Functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Here are listed all the functions that implement the Wifi Provisioning APIs.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gacdde655475346d6c5d5983c8e159246e"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#gacdde655475346d6c5d5983c8e159246e">m2m_wifi_start_provision_mode</a> (<a class="el" href="structtstr_m2_m_a_p_config.html">tstrM2MAPConfig</a> *pstrM2MAPConfig, char *pcHttpServerDomainName, uint8_t bEnableHttpRedirect)</td></tr>
<tr class="memdesc:gacdde655475346d6c5d5983c8e159246e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronous API for control of Wi-Fi provisioning functionality.  <a href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#gacdde655475346d6c5d5983c8e159246e">More...</a><br /></td></tr>
<tr class="separator:gacdde655475346d6c5d5983c8e159246e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga150576e8996172d1ae24a7070eb527c3"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#ga150576e8996172d1ae24a7070eb527c3">m2m_wifi_start_provision_mode_ext</a> (<a class="el" href="structtstr_m2_m_a_p_mode_config.html">tstrM2MAPModeConfig</a> *pstrAPModeConfig, char *pcHttpServerDomainName, uint8_t bEnableHttpRedirect)</td></tr>
<tr class="memdesc:ga150576e8996172d1ae24a7070eb527c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronous API for control of Wi-Fi provisioning functionality with extended options.  <a href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#ga150576e8996172d1ae24a7070eb527c3">More...</a><br /></td></tr>
<tr class="separator:ga150576e8996172d1ae24a7070eb527c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga580bb659506b1c6d5c0f7c35f79f5386"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#ga580bb659506b1c6d5c0f7c35f79f5386">m2m_wifi_stop_provision_mode</a> (void)</td></tr>
<tr class="memdesc:ga580bb659506b1c6d5c0f7c35f79f5386"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronous API for terminating provisioning mode on the WINC IC.  <a href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#ga580bb659506b1c6d5c0f7c35f79f5386">More...</a><br /></td></tr>
<tr class="separator:ga580bb659506b1c6d5c0f7c35f79f5386"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Here are listed all the functions that implement the Wifi Provisioning APIs. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gacdde655475346d6c5d5983c8e159246e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacdde655475346d6c5d5983c8e159246e">&#9670;&nbsp;</a></span>m2m_wifi_start_provision_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t m2m_wifi_start_provision_mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtstr_m2_m_a_p_config.html">tstrM2MAPConfig</a> *&#160;</td>
          <td class="paramname"><em>pstrM2MAPConfig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pcHttpServerDomainName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bEnableHttpRedirect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asynchronous API for control of Wi-Fi provisioning functionality. </p>
<p>Asynchronous Wi-Fi provisioning function, which starts the WINC HTTP PROVISIONING mode. The function triggers the WINC to activate the Wi-Fi AP (HOTSPOT) mode with the passed configuration parameters and then starts the HTTP Provision WEB Server.</p>
<p>Provisioning status is returned in an event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstrAPConfig</td><td>AP configuration parameters as defined in <a class="el" href="structtstr_m2_m_a_p_config.html">tstrM2MAPConfig</a> configuration structure. If a NULL value is passed in, the call will result in a negative error <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga39ed05df730834f2255971ca9879996e">M2M_ERR_FAIL</a>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pcHttpServerDomainName</td><td>Domain name of the HTTP Provision WEB server which others will use to load the provisioning Home page. The domain name can have one of the following 3 forms:<ul>
<li>1. "wincprov.com"</li>
<li>2. "http://wincprov.com"</li>
<li>3. "https://wincprov.com"</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>Forms 1 and 2 are equivalent, they will both start a plain http server, while form 3 will start a secure HTTP provisioning Session (HTTP over SSL connection).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bEnableHttpRedirect</td><td>A flag to enable/disable the HTTP redirect feature. If Secure provisioning is enabled (i.e. the server domain name uses "https" prefix) this flag is ignored (no meaning for redirect in HTTPS). Possible values are:<ul>
<li>ZERO value, which means DO NOT use HTTP Redirect. In this case, the associated device could open the provisioning page ONLY when the HTTP Provision URL of the WINC HTTP Server is correctly written on the browser.</li>
<li>Non-Zero value, means use HTTP Redirect. In this case, all http traffic (<a href="http://URL">http://URL</a>) from the associated device (Phone, PC, etc) will be redirected to the WINC HTTP Provisioning Home page.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___w_l_a_n_callbacks.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at startup. Registering the callback is done through passing it to the initialization <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a> function.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a35767ad0217ab92b149bc77e79610d33">M2M_WIFI_RESP_CONN_INFO</a> must be handled in the callback to receive the requested connection info.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>DO NOT use ".local" in the pcHttpServerDomainName.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC, and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___w_l_a_n_callbacks.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> <a class="el" href="group___wifi_init_fn.html#ga66f5bf5f84f898bdd4453f2717a3deb5" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a> <a class="el" href="group___stop_provisioning_mode_fn.html#ga580bb659506b1c6d5c0f7c35f79f5386" title="Synchronous API for terminating provisioning mode on the WINC IC.">m2m_wifi_stop_provision_mode</a> <a class="el" href="structtstr_m2_m_a_p_config.html" title="AP Configuration.">tstrM2MAPConfig</a></dd></dl>
<h1><a class="anchor" id="WIFIExample1"></a>
Example</h1>
<p>The example demonstrates a code snippet for how provisioning is triggered and the response event received accordingly.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a>    *pstrProvInfo = (<a class="code" href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a>*)pvMsg;</div>
<div class="line">            <span class="keywordflow">if</span>(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a8952b7fbbc13671bbac9886238e30915">u8Status</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="structtstr_network_id.html">tstrNetworkId</a>   strNetworkId = {NULL, pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>, (uint8_t)strlen((<span class="keywordtype">char</span>*)(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>)), <a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>};</div>
<div class="line">                <a class="code" href="structtstr_auth_psk.html">tstrAuthPsk</a>     strAuthPsk = {NULL, pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>, (uint8_t)strlen((<span class="keywordtype">char</span>*)(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>))};</div>
<div class="line">                <a class="code" href="group___w_l_a_n_c_o_n_n_e_c_t.html#gaa131b2fb19e32077923852539b807a84">m2m_wifi_connect_psk</a>(<a class="code" href="group___wlan_enums.html#gga5669e8f0b3b645d5ece2519a33cf8c2ca6c7300873de793b2ca9342997d271ba7">WIFI_CRED_SAVE_ENCRYPTED</a>, &amp;strNetworkId, &amp;strAuthPsk);</div>
<div class="line"> </div>
<div class="line">                printf(<span class="stringliteral">&quot;PROV SSID : %s\n&quot;</span>,pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>);</div>
<div class="line">                printf(<span class="stringliteral">&quot;PROV PSK  : %s\n&quot;</span>,pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Provisioning Failed\n&quot;</span>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="structtstr_m2_m_a_p_config.html">tstrM2MAPConfig</a>     apConfig;</div>
<div class="line">        uint8_t               bEnableRedirect = 1;</div>
<div class="line"> </div>
<div class="line">        strcpy(apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#af705ff369f7d0f49bec8b715704fa43e">au8SSID</a>, <span class="stringliteral">&quot;WINC_SSID&quot;</span>);</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#a06e63e0e3973b60398e1c91edde75105">u8ListenChannel</a>    = 1;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#a39a98300948f1c568cbce5553d9bf2cc">u8SecType</a>          = <a class="code" href="group___wlan_enums.html#ggaa232a09c953ec8200c13774f94107b05a81b513753be791c13b73d0b2d3639b69">M2M_WIFI_SEC_OPEN</a>;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#a53d040e4c4583692c8719506c3b1b090">u8SsidHide</a>         = 0;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// IP Address</span></div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[0] = 192;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[1] = 168;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[2] = 1;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[3] = 1;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#gacdde655475346d6c5d5983c8e159246e">m2m_wifi_start_provision_mode</a>(&amp;apConfig, <span class="stringliteral">&quot;atmelwincconf.com&quot;</span>, bEnableRedirect);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>This function allows the application to start the WINC in 'provisioning mode', a special mode that triggers the WINC to create a Wi-Fi access point, DHCP server, and HTTP server.</p>
<p>The HTTP server presents a provisioning page to a connected client which lists the access points detected in the vicinity of the WINC, and allows one of these to be selected and any appropriate credentials to be entered. This allows a headless system to be provisioned (configured to connect with an access point).</p>
<p>Provisioning status is returned in an event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstrAPConfig</td><td>AP configuration parameters as defined in <a class="el" href="structtstr_m2_m_a_p_config.html">tstrM2MAPConfig</a> configuration structure. If a NULL value is passed in, the call will result in a negative error <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga39ed05df730834f2255971ca9879996e">M2M_ERR_FAIL</a>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pcHttpServerDomainName</td><td>Domain name of the HTTP Provision WEB server which others will use to load the provisioning Home page. The domain name can have one of the following 3 forms:<ul>
<li>1. "wincprov.com"</li>
<li>2. "http://wincprov.com"</li>
<li>3. "https://wincprov.com"</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>Forms 1 and 2 are equivalent, they will both start a plain http server, while form 3 will start a secure HTTP provisioning Session (HTTP over SSL connection).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bEnableHttpRedirect</td><td>A flag to enable/disable the HTTP redirect feature. If Secure provisioning is enabled (i.e. the server domain name uses "https" prefix) this flag is ignored (no meaning for redirect in HTTPS). Possible values are:<ul>
<li>Zero: DO NOT use HTTP Redirect. In this case, the associated device could open the provisioning page ONLY when the HTTP Provision URL of the WINC HTTP Server is correctly written on the browser.</li>
<li>Non-Zero: Use HTTP Redirect. In this case, all http traffic (<a href="http://URL">http://URL</a>) from the associated device (Phone, PC, etc) will be redirected to the WINC HTTP Provisioning Home page.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___w_l_a_n_callbacks.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at startup. Registering the callback is done through passing it to the initialization <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a> function.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a35767ad0217ab92b149bc77e79610d33">M2M_WIFI_RESP_CONN_INFO</a> must be handled in the callback to receive the requested connection info.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not use ".local" in the pcHttpServerDomainName.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___w_l_a_n_callbacks.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> <a class="el" href="group___wifi_init_fn.html#ga66f5bf5f84f898bdd4453f2717a3deb5" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a> <a class="el" href="group___stop_provisioning_mode_fn.html#ga580bb659506b1c6d5c0f7c35f79f5386" title="Synchronous API for terminating provisioning mode on the WINC IC.">m2m_wifi_stop_provision_mode</a> <a class="el" href="structtstr_m2_m_a_p_config.html" title="AP Configuration.">tstrM2MAPConfig</a></dd></dl>
<h1><a class="anchor" id="WIFIExample1"></a>
Example</h1>
<p>The example demonstrates a code snippet for how provisioning is triggered and the response event received accordingly.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a>    *pstrProvInfo = (<a class="code" href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a>*)pvMsg;</div>
<div class="line">            <span class="keywordflow">if</span>(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a8952b7fbbc13671bbac9886238e30915">u8Status</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="structtstr_network_id.html">tstrNetworkId</a>   strNetworkId = {NULL, pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>, (uint8_t)strlen((<span class="keywordtype">char</span>*)(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>)), <a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>};</div>
<div class="line">                <a class="code" href="structtstr_auth_psk.html">tstrAuthPsk</a>     strAuthPsk = {NULL, pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>, (uint8_t)strlen((<span class="keywordtype">char</span>*)(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>))};</div>
<div class="line">                <a class="code" href="group___w_l_a_n_c_o_n_n_e_c_t.html#gaa131b2fb19e32077923852539b807a84">m2m_wifi_connect_psk</a>(<a class="code" href="group___wlan_enums.html#gga5669e8f0b3b645d5ece2519a33cf8c2ca6c7300873de793b2ca9342997d271ba7">WIFI_CRED_SAVE_ENCRYPTED</a>, &amp;strNetworkId, &amp;strAuthPsk);</div>
<div class="line"> </div>
<div class="line">                printf(<span class="stringliteral">&quot;PROV SSID : %s\n&quot;</span>,pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>);</div>
<div class="line">                printf(<span class="stringliteral">&quot;PROV PSK  : %s\n&quot;</span>,pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Provisioning Failed\n&quot;</span>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a> param;</div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a> = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="structtstr_m2_m_a_p_config.html">tstrM2MAPConfig</a> apConfig;</div>
<div class="line">        uint8_t           bEnableRedirect = 1;</div>
<div class="line"> </div>
<div class="line">        strcpy(apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#af705ff369f7d0f49bec8b715704fa43e">au8SSID</a>, <span class="stringliteral">&quot;WINC_SSID&quot;</span>);</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#a06e63e0e3973b60398e1c91edde75105">u8ListenChannel</a> = 1;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#a39a98300948f1c568cbce5553d9bf2cc">u8SecType</a>       = <a class="code" href="group___wlan_enums.html#ggaa232a09c953ec8200c13774f94107b05a81b513753be791c13b73d0b2d3639b69">M2M_WIFI_SEC_OPEN</a>;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#a53d040e4c4583692c8719506c3b1b090">u8SsidHide</a>      = 0;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// IP Address</span></div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[0] = 192;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[1] = 168;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[2] = 1;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[3] = 1;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#gacdde655475346d6c5d5983c8e159246e">m2m_wifi_start_provision_mode</a>(&amp;apConfig, <span class="stringliteral">&quot;atmelwincconf.com&quot;</span>, bEnableRedirect);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>This function allows the application to start the WINC IC in 'provisioning mode', a special mode that triggers the WINC to create a Wi-Fi access point, DHCP server, and HTTP server.</p>
<p>The HTTP server presents a provisioning page to a connected client which lists the access points detected in the vicinity of the WINC, and allows one of these to be selected and any appropriate credentials to be entered. This allows a headless system to be provisioned (configured to connect with an access point).</p>
<p>Provisioning status is returned in a <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a> event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstrAPConfig</td><td>AP configuration parameters as defined in <a class="el" href="structtstr_m2_m_a_p_config.html">tstrM2MAPConfig</a> configuration structure. A NULL value passed in, will result in a negative error <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga39ed05df730834f2255971ca9879996e">M2M_ERR_FAIL</a>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pcHttpServerDomainName</td><td>Domain name of the HTTP Provision WEB server which others will use to load the provisioning Home page. For example "wincconf.net".</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bEnableHttpRedirect</td><td>A flag to enable/disable the HTTP redirect feature. Possible values are:<ul>
<li>Zero: DO NOT Use HTTP Redirect. In this case the associated device could open the provisioning page ONLY when the HTTP Provision URL of the WINC HTTP Server is correctly written on the browser.</li>
<li>Non-Zero: Use HTTP Redirect. In this case, all http traffic (<a href="http://URL">http://URL</a>) from the associated device (Phone, PC, ...etc) will be redirected to the WINC HTTP Provisioning Home page.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC, and a negative value otherwise.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___w_l_a_n_callbacks.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at startup. Registering the callback is done through passing it to the initialization <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a> function.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a35767ad0217ab92b149bc77e79610d33">M2M_WIFI_RESP_CONN_INFO</a> must be handled in the callback to receive the requested connection info.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___w_l_a_n_callbacks.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> <a class="el" href="group___wifi_init_fn.html#ga66f5bf5f84f898bdd4453f2717a3deb5" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a> <a class="el" href="group___stop_provisioning_mode_fn.html#ga580bb659506b1c6d5c0f7c35f79f5386" title="Synchronous API for terminating provisioning mode on the WINC IC.">m2m_wifi_stop_provision_mode</a> <a class="el" href="structtstr_m2_m_a_p_config.html" title="AP Configuration.">tstrM2MAPConfig</a></dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>DO Not use ".local" in the pcHttpServerDomainName.</dd></dl>
<h1><a class="anchor" id="WIFIExample1"></a>
Example</h1>
<p>The example demonstrates a code snippet for how provisioning is triggered and the response event received accordingly.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a>    *pstrProvInfo = (<a class="code" href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a>*)pvMsg;</div>
<div class="line">            <span class="keywordflow">if</span>(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a8952b7fbbc13671bbac9886238e30915">u8Status</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="group___w_l_a_n_c_o_n_n_e_c_t.html#ga39167bb6c3a20a24f46b387e7096d501">m2m_wifi_connect</a>((<span class="keywordtype">char</span>*)pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>, (uint8_t)strlen(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>), pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a8cd72858f2c28a7e61099ff6b9d1196e">u8SecType</a>,</div>
<div class="line">                        pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>, <a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line"> </div>
<div class="line">                printf(<span class="stringliteral">&quot;PROV SSID : %s\n&quot;</span>,pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>);</div>
<div class="line">                printf(<span class="stringliteral">&quot;PROV PSK  : %s\n&quot;</span>,pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Provisioning Failed\n&quot;</span>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="structtstr_m2_m_a_p_config.html">tstrM2MAPConfig</a>     apConfig;</div>
<div class="line">        uint8_t             bEnableRedirect = 1;</div>
<div class="line"> </div>
<div class="line">        strcpy(apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#af705ff369f7d0f49bec8b715704fa43e">au8SSID</a>, <span class="stringliteral">&quot;WINC_SSID&quot;</span>);</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#a06e63e0e3973b60398e1c91edde75105">u8ListenChannel</a>    = 1;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#a39a98300948f1c568cbce5553d9bf2cc">u8SecType</a>          = <a class="code" href="group___wlan_enums.html#ggaa232a09c953ec8200c13774f94107b05a81b513753be791c13b73d0b2d3639b69">M2M_WIFI_SEC_OPEN</a>;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#a53d040e4c4583692c8719506c3b1b090">u8SsidHide</a>         = 0;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// IP Address</span></div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[0] = 192;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[1] = 168;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[2] = 1;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[0] = 1;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#gacdde655475346d6c5d5983c8e159246e">m2m_wifi_start_provision_mode</a>(&amp;apConfig, <span class="stringliteral">&quot;atmelwincconf.com&quot;</span>, bEnableRedirect);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstrAPConfig</td><td>AP configuration parameters as defined in <a class="el" href="structtstr_m2_m_a_p_config.html">tstrM2MAPConfig</a> configuration structure. A NULL value passed in, will result in a negative error <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga39ed05df730834f2255971ca9879996e">M2M_ERR_FAIL</a>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pcHttpServerDomainName</td><td>Domain name of the HTTP Provision WEB server which others will use to load the provisioning Home page. The domain name can have one of the following 3 forms: 1- "wincprov.com" 2- "http://wincprov.com" 3- "https://wincprov.com" The forms 1 and 2 are equivalent, they both will start a plain http server, while form 3 will start a secure HTTP provisioning Session (HTTP over SSL connection).</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bEnableHttpRedirect</td><td>A flag to enable/disable the HTTP redirect feature. If Secure provisioning is enabled (i.e. the server domain name uses "https" prefix) this flag is ignored (no meaning for redirect in HTTPS). Possible values are:<ul>
<li>ZERO DO NOT Use HTTP Redirect. In this case the associated device could open the provisioning page ONLY when the HTTP Provision URL of the WINC HTTP Server is correctly written on the browser.</li>
<li>Non-Zero value Use HTTP Redirect. In this case, all http traffic (<a href="http://URL">http://URL</a>) from the associated device (Phone, PC, ...etc) will be redirected to the WINC HTTP Provisioning Home page.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___w_l_a_n_callbacks.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at startup. Registering the callback is done through passing it to the initialization <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a> function.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a35767ad0217ab92b149bc77e79610d33">M2M_WIFI_RESP_CONN_INFO</a> must be handled in the callback to receive the requested connection info.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___w_l_a_n_callbacks.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> <a class="el" href="group___wifi_init_fn.html#ga66f5bf5f84f898bdd4453f2717a3deb5" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a> <a class="el" href="group___stop_provisioning_mode_fn.html#ga580bb659506b1c6d5c0f7c35f79f5386" title="Synchronous API for terminating provisioning mode on the WINC IC.">m2m_wifi_stop_provision_mode</a> <a class="el" href="structtstr_m2_m_a_p_config.html" title="AP Configuration.">tstrM2MAPConfig</a></dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>DO Not use ".local" in the pcHttpServerDomainName.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for successful operations and a negative value otherwise.</dd></dl>
<h1><a class="anchor" id="Example"></a>
Example</h1>
<p>The example demonstrates a code snippet for how provisioning is triggered and the response event received accordingly. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a>    *pstrProvInfo = (<a class="code" href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a>*)pvMsg;</div>
<div class="line">            <span class="keywordflow">if</span>(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a8952b7fbbc13671bbac9886238e30915">u8Status</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="group___w_l_a_n_c_o_n_n_e_c_t.html#ga39167bb6c3a20a24f46b387e7096d501">m2m_wifi_connect</a>((<span class="keywordtype">char</span>*)pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>, (uint8_t)strlen(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>), pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a8cd72858f2c28a7e61099ff6b9d1196e">u8SecType</a>,</div>
<div class="line">                        pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>, <a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line"> </div>
<div class="line">                printf(<span class="stringliteral">&quot;PROV SSID : %s\n&quot;</span>,pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>);</div>
<div class="line">                printf(<span class="stringliteral">&quot;PROV PSK  : %s\n&quot;</span>,pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Provisioning Failed\n&quot;</span>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="structtstr_m2_m_a_p_config.html">tstrM2MAPConfig</a>     apConfig;</div>
<div class="line">        uint8_t             bEnableRedirect = 1;</div>
<div class="line"> </div>
<div class="line">        strcpy(apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#af705ff369f7d0f49bec8b715704fa43e">au8SSID</a>, <span class="stringliteral">&quot;WINC_SSID&quot;</span>);</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#a06e63e0e3973b60398e1c91edde75105">u8ListenChannel</a>    = 1;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#a39a98300948f1c568cbce5553d9bf2cc">u8SecType</a>          = <a class="code" href="group___wlan_enums.html#ggaa232a09c953ec8200c13774f94107b05a81b513753be791c13b73d0b2d3639b69">M2M_WIFI_SEC_OPEN</a>;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#a53d040e4c4583692c8719506c3b1b090">u8SsidHide</a>         = 0;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// IP Address</span></div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[0] = 192;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[1] = 168;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[2] = 1;</div>
<div class="line">        apConfig.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[0] = 1;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#gacdde655475346d6c5d5983c8e159246e">m2m_wifi_start_provision_mode</a>(&amp;apConfig, <span class="stringliteral">&quot;atmelwincconf.com&quot;</span>, bEnableRedirect);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga150576e8996172d1ae24a7070eb527c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga150576e8996172d1ae24a7070eb527c3">&#9670;&nbsp;</a></span>m2m_wifi_start_provision_mode_ext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t m2m_wifi_start_provision_mode_ext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtstr_m2_m_a_p_mode_config.html">tstrM2MAPModeConfig</a> *&#160;</td>
          <td class="paramname"><em>pstrAPModeConfig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pcHttpServerDomainName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bEnableHttpRedirect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asynchronous API for control of Wi-Fi provisioning functionality with extended options. </p>
<p>Asynchronous Wi-Fi provisioning function, which starts the WINC HTTP PROVISIONING mode. The function triggers the WINC to activate the Wi-Fi AP (HOTSPOT) mode with the passed configuration parameters and then starts the HTTP Provision WEB Server.</p>
<p>Provisioning status is returned in an event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstrAPModeConfig</td><td>AP configuration parameters as defined in <a class="el" href="structtstr_m2_m_a_p_mode_config.html">tstrM2MAPModeConfig</a> configuration structure. A NULL value passed in, will result in a negative error <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga39ed05df730834f2255971ca9879996e">M2M_ERR_FAIL</a>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pcHttpServerDomainName</td><td>Domain name of the HTTP Provision WEB server which others will use to load the provisioning Home page. The domain name can have one of the following 3 forms:<ul>
<li>1. "wincprov.com"</li>
<li>2. "http://wincprov.com"</li>
<li>3. "https://wincprov.com"</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>The forms 1 and 2 are equivalent, they both will start a plain http server, while form 3 will start a secure HTTP provisioning Session (HTTP over SSL connection).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bEnableHttpRedirect</td><td>A flag to enable/disable the HTTP redirect feature. If Secure provisioning is enabled (i.e. the server domain name uses "https" prefix) this flag is ignored (no meaning for redirect in HTTPS). Possible values are:<ul>
<li>ZERO value, which means DO NOT use HTTP Redirect. In this case, the associated device could open the provisioning page ONLY when the HTTP Provision URL of the WINC HTTP Server is correctly written on the browser.</li>
<li>Non-Zero value, means use HTTP Redirect. In this case, all http traffic (<a href="http://URL">http://URL</a>) from the associated device (Phone, PC, etc) will be redirected to the WINC HTTP Provisioning Home page.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___w_l_a_n_callbacks.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at startup. Registering the callback is done through passing it to the initialization <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a> function.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a35767ad0217ab92b149bc77e79610d33">M2M_WIFI_RESP_CONN_INFO</a> must be handled in the callback to receive the requested connection info.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>DO Not use ".local" in the pcHttpServerDomainName.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___w_l_a_n_callbacks.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> <a class="el" href="group__m2m__wifi.html#ga66f5bf5f84f898bdd4453f2717a3deb5" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a> <a class="el" href="group__m2m__wifi.html#ga580bb659506b1c6d5c0f7c35f79f5386" title="Synchronous API for terminating provisioning mode on the WINC IC.">m2m_wifi_stop_provision_mode</a> <a class="el" href="structtstr_m2_m_a_p_mode_config.html" title="AP Configuration.">tstrM2MAPModeConfig</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC, and a negative value otherwise.</dd></dl>
<h1><a class="anchor" id="WIFIExample1b"></a>
Example</h1>
<p>The example demonstrates a code snippet for how provisioning is triggered and the response event received accordingly.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a>    *pstrProvInfo = (<a class="code" href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a>*)pvMsg;</div>
<div class="line">            <span class="keywordflow">if</span>(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a8952b7fbbc13671bbac9886238e30915">u8Status</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="structtstr_network_id.html">tstrNetworkId</a>   strNetworkId = {NULL, pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>, (uint8_t)strlen((<span class="keywordtype">char</span>*)(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>)), <a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>};</div>
<div class="line">                <a class="code" href="structtstr_auth_psk.html">tstrAuthPsk</a>     strAuthPsk = {NULL, pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>, (uint8_t)strlen((<span class="keywordtype">char</span>*)(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>))};</div>
<div class="line">                <a class="code" href="group___w_l_a_n_c_o_n_n_e_c_t.html#gaa131b2fb19e32077923852539b807a84">m2m_wifi_connect_psk</a>(<a class="code" href="group___wlan_enums.html#gga5669e8f0b3b645d5ece2519a33cf8c2ca6c7300873de793b2ca9342997d271ba7">WIFI_CRED_SAVE_ENCRYPTED</a>, &amp;strNetworkId, &amp;strAuthPsk);</div>
<div class="line"> </div>
<div class="line">                printf(<span class="stringliteral">&quot;PROV SSID : %s\n&quot;</span>,pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>);</div>
<div class="line">                printf(<span class="stringliteral">&quot;PROV PSK  : %s\n&quot;</span>,pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Provisioning Failed\n&quot;</span>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="structtstr_m2_m_a_p_mode_config.html">tstrM2MAPModeConfig</a> apModeConfig;</div>
<div class="line">        uint8_t               bEnableRedirect = 1;</div>
<div class="line"> </div>
<div class="line">        strcpy(apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#af705ff369f7d0f49bec8b715704fa43e">au8SSID</a>, <span class="stringliteral">&quot;WINC_SSID&quot;</span>);</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#a06e63e0e3973b60398e1c91edde75105">u8ListenChannel</a>    = 1;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#a39a98300948f1c568cbce5553d9bf2cc">u8SecType</a>          = <a class="code" href="group___wlan_enums.html#ggaa232a09c953ec8200c13774f94107b05a81b513753be791c13b73d0b2d3639b69">M2M_WIFI_SEC_OPEN</a>;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#a53d040e4c4583692c8719506c3b1b090">u8SsidHide</a>         = 0;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// IP Address</span></div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[0] = 192;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[1] = 168;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[2] = 1;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[3] = 1;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Default router IP</span></div>
<div class="line">        memcpy(apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">strApConfigExt</a>.<a class="code" href="structtstr_m2_m_a_p_config_ext.html#a30c942c4ebf37f534eac15a2076f161b">au8DefRouterIP</a>, apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>, 4);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// DNS Server IP</span></div>
<div class="line">        memcpy(apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">strApConfigExt</a>.<a class="code" href="structtstr_m2_m_a_p_config_ext.html#a145716448cb905d55f9ca4187822799c">au8DNSServerIP</a>, apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>, 4);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Subnet mask</span></div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">strApConfigExt</a>.<a class="code" href="structtstr_m2_m_a_p_config_ext.html#a9901012bd7c47a4b8b702914401297aa">au8SubnetMask</a>[0]    = 255;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">strApConfigExt</a>.<a class="code" href="structtstr_m2_m_a_p_config_ext.html#a9901012bd7c47a4b8b702914401297aa">au8SubnetMask</a>[1]    = 255;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">strApConfigExt</a>.<a class="code" href="structtstr_m2_m_a_p_config_ext.html#a9901012bd7c47a4b8b702914401297aa">au8SubnetMask</a>[2]    = 255;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">strApConfigExt</a>.<a class="code" href="structtstr_m2_m_a_p_config_ext.html#a9901012bd7c47a4b8b702914401297aa">au8SubnetMask</a>[3]    = 0;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#ga150576e8996172d1ae24a7070eb527c3">m2m_wifi_start_provision_mode_ext</a>(&amp;apModeConfig, <span class="stringliteral">&quot;atmelwincconf.com&quot;</span>, bEnableRedirect);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>This function allows the application to start the WINC in 'provisioning mode', a special mode that triggers the WINC to create a Wi-Fi access point, DHCP server, and HTTP server.</p>
<p>The HTTP server presents a provisioning page to a connected client which lists the access points detected in the vicinity of the WINC, and allows one of these to be selected and any appropriate credentials to be entered. This allows a headless system to be provisioned (configured to connect with an access point).</p>
<p>Provisioning status is returned in an event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstrAPModeConfig</td><td>AP configuration parameters as defined in <a class="el" href="structtstr_m2_m_a_p_mode_config.html">tstrM2MAPModeConfig</a> configuration structure. A NULL value passed in, will result in a negative error <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga39ed05df730834f2255971ca9879996e">M2M_ERR_FAIL</a>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pcHttpServerDomainName</td><td>Domain name of the HTTP Provision WEB server which others will use to load the provisioning Home page. The domain name can have one of the following 3 forms:<ul>
<li>1. "wincprov.com"</li>
<li>2. "http://wincprov.com"</li>
<li>3. "https://wincprov.com"</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>The forms 1 and 2 are equivalent, they both will start a plain http server, while form 3 will start a secure HTTP provisioning Session (HTTP over SSL connection).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bEnableHttpRedirect</td><td>A flag to enable/disable the HTTP redirect feature. If Secure provisioning is enabled (i.e. the server domain name uses "https" prefix) this flag is ignored (no meaning for redirect in HTTPS). Possible values are:<ul>
<li>Zero: DO NOT use HTTP Redirect. In this case the associated device could open the provisioning page ONLY when the HTTP Provision URL of the WINC HTTP Server is correctly written on the browser.</li>
<li>Non-Zero: Use HTTP Redirect. In this case, all http traffic (<a href="http://URL">http://URL</a>) from the associated device (Phone, PC, ...etc) will be redirected to the WINC HTTP Provisioning Home page.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC and a negative value otherwise.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___w_l_a_n_callbacks.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> MUST be implemented and registered at startup. Registering the callback is done through passing it to the initialization <a class="el" href="group___w_l_a_n_a_p_i.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a> function.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a35767ad0217ab92b149bc77e79610d33">M2M_WIFI_RESP_CONN_INFO</a> must be handled in the callback to receive the requested connection info.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not use ".local" in the pcHttpServerDomainName.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___w_l_a_n_callbacks.html#ga2c69a19a6593530315e9c6d3b3dc409d">tpfAppWifiCb</a> <a class="el" href="group__m2m__wifi.html#ga66f5bf5f84f898bdd4453f2717a3deb5" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a> <a class="el" href="group__m2m__wifi.html#ga580bb659506b1c6d5c0f7c35f79f5386" title="Synchronous API for terminating provisioning mode on the WINC IC.">m2m_wifi_stop_provision_mode</a> <a class="el" href="structtstr_m2_m_a_p_mode_config.html" title="AP Configuration.">tstrM2MAPModeConfig</a></dd></dl>
<h1><a class="anchor" id="WIFIExample12"></a>
Example</h1>
<p>The example demonstrates a code snippet for how provisioning is triggered and the response event received accordingly.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;m2m_wifi.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;m2m_types.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(uint8_t u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a>    *pstrProvInfo = (<a class="code" href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a>*)pvMsg;</div>
<div class="line">            <span class="keywordflow">if</span>(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a8952b7fbbc13671bbac9886238e30915">u8Status</a> == <a class="code" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="structtstr_network_id.html">tstrNetworkId</a>   strNetworkId = {NULL, pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>, (uint8_t)strlen((<span class="keywordtype">char</span>*)(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>)), <a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>};</div>
<div class="line">                <a class="code" href="structtstr_auth_psk.html">tstrAuthPsk</a>     strAuthPsk = {NULL, pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>, (uint8_t)strlen((<span class="keywordtype">char</span>*)(pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>))};</div>
<div class="line">                <a class="code" href="group___w_l_a_n_c_o_n_n_e_c_t.html#gaa131b2fb19e32077923852539b807a84">m2m_wifi_connect_psk</a>(<a class="code" href="group___wlan_enums.html#gga5669e8f0b3b645d5ece2519a33cf8c2ca6c7300873de793b2ca9342997d271ba7">WIFI_CRED_SAVE_ENCRYPTED</a>, &amp;strNetworkId, &amp;strAuthPsk);</div>
<div class="line"> </div>
<div class="line">                printf(<span class="stringliteral">&quot;PROV SSID : %s\n&quot;</span>,pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">au8SSID</a>);</div>
<div class="line">                printf(<span class="stringliteral">&quot;PROV PSK  : %s\n&quot;</span>,pstrProvInfo-&gt;<a class="code" href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">au8Password</a>);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Provisioning Failed\n&quot;</span>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line"> </div>
<div class="line">    param.<a class="code" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code" href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="structtstr_m2_m_a_p_mode_config.html">tstrM2MAPModeConfig</a> apModeConfig;</div>
<div class="line">        uint8_t               bEnableRedirect = 1;</div>
<div class="line"> </div>
<div class="line">        strcpy(apModeConfig.au8SSID, <span class="stringliteral">&quot;WINC_SSID&quot;</span>);</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#a06e63e0e3973b60398e1c91edde75105">u8ListenChannel</a>    = 1;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#a39a98300948f1c568cbce5553d9bf2cc">u8SecType</a>          = <a class="code" href="group___wlan_enums.html#ggaa232a09c953ec8200c13774f94107b05a81b513753be791c13b73d0b2d3639b69">M2M_WIFI_SEC_OPEN</a>;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#a53d040e4c4583692c8719506c3b1b090">u8SsidHide</a>         = 0;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// IP Address</span></div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[0] = 192;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[1] = 168;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[2] = 1;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>[3] = 1;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Default router IP</span></div>
<div class="line">        memcpy(apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">strApConfigExt</a>.<a class="code" href="structtstr_m2_m_a_p_config_ext.html#a30c942c4ebf37f534eac15a2076f161b">au8DefRouterIP</a>, apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>, 4);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// DNS Server IP</span></div>
<div class="line">        memcpy(apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">strApConfigExt</a>.<a class="code" href="structtstr_m2_m_a_p_config_ext.html#a145716448cb905d55f9ca4187822799c">au8DNSServerIP</a>, apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">strApConfig</a>.<a class="code" href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">au8DHCPServerIP</a>, 4);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Subnet mask</span></div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">strApConfigExt</a>.<a class="code" href="structtstr_m2_m_a_p_config_ext.html#a9901012bd7c47a4b8b702914401297aa">au8SubnetMask</a>[0] = 255;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">strApConfigExt</a>.<a class="code" href="structtstr_m2_m_a_p_config_ext.html#a9901012bd7c47a4b8b702914401297aa">au8SubnetMask</a>[1] = 255;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">strApConfigExt</a>.<a class="code" href="structtstr_m2_m_a_p_config_ext.html#a9901012bd7c47a4b8b702914401297aa">au8SubnetMask</a>[2] = 255;</div>
<div class="line">        apModeConfig.<a class="code" href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">strApConfigExt</a>.<a class="code" href="structtstr_m2_m_a_p_config_ext.html#a9901012bd7c47a4b8b702914401297aa">au8SubnetMask</a>[3] = 0;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#ga150576e8996172d1ae24a7070eb527c3">m2m_wifi_start_provision_mode_ext</a>(&amp;apModeConfig, <span class="stringliteral">&quot;atmelwincconf.com&quot;</span>, bEnableRedirect);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a>(NULL);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga580bb659506b1c6d5c0f7c35f79f5386"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga580bb659506b1c6d5c0f7c35f79f5386">&#9670;&nbsp;</a></span>m2m_wifi_stop_provision_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t m2m_wifi_stop_provision_mode </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronous API for terminating provisioning mode on the WINC IC. </p>
<p>Synchronous API for terminating provisioning mode on the WINC.</p>
<p>This function will terminate any currently active provisioning mode on the WINC IC, returning the IC to idle.</p>
<dl class="section pre"><dt>Precondition</dt><dd>An active provisioning session must be active before it is terminated through this function.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns ZERO for success and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___start_provision_mode_fn.html#gacdde655475346d6c5d5983c8e159246e" title="Asynchronous API for control of Wi-Fi provisioning functionality.">m2m_wifi_start_provision_mode</a></dd></dl>
<p>This function will terminate any currently active provisioning mode on the WINC, returning the WINC to idle.</p>
<dl class="section pre"><dt>Precondition</dt><dd>An active provisioning session must be active before it is terminated through this function.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for success and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___start_provision_mode_fn.html#gacdde655475346d6c5d5983c8e159246e" title="Asynchronous API for control of Wi-Fi provisioning functionality.">m2m_wifi_start_provision_mode</a></dd></dl>
<p>This function will terminate any currently active provisioning mode on the WINC IC, returning the IC to idle.</p>
<dl class="section return"><dt>Returns</dt><dd>The function returns ZERO for success and a negative value otherwise.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>An active provisioning session must be active before it is terminated through this function. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___start_provision_mode_fn.html#gacdde655475346d6c5d5983c8e159246e" title="Asynchronous API for control of Wi-Fi provisioning functionality.">m2m_wifi_start_provision_mode</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>An active provisioning session must be active before it is terminated through this function. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___start_provision_mode_fn.html#gacdde655475346d6c5d5983c8e159246e" title="Asynchronous API for control of Wi-Fi provisioning functionality.">m2m_wifi_start_provision_mode</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns ZERO for success and a negative value otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="astructtstr_m2_m_a_p_mode_config_html_ac7948d8cc464ef082bf766f8cae0815b"><div class="ttname"><a href="structtstr_m2_m_a_p_mode_config.html#ac7948d8cc464ef082bf766f8cae0815b">tstrM2MAPModeConfig::strApConfig</a></div><div class="ttdeci">tstrM2MAPConfig strApConfig</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2145</div></div>
<div class="ttc" id="astructtstr_m2_m_a_p_config_ext_html_a9901012bd7c47a4b8b702914401297aa"><div class="ttname"><a href="structtstr_m2_m_a_p_config_ext.html#a9901012bd7c47a4b8b702914401297aa">tstrM2MAPConfigExt::au8SubnetMask</a></div><div class="ttdeci">uint8_t au8SubnetMask[4]</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2129</div></div>
<div class="ttc" id="astructtstr_m2_m_provision_info_html_a8952b7fbbc13671bbac9886238e30915"><div class="ttname"><a href="structtstr_m2_m_provision_info.html#a8952b7fbbc13671bbac9886238e30915">tstrM2MProvisionInfo::u8Status</a></div><div class="ttdeci">uint8_t u8Status</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2340</div></div>
<div class="ttc" id="agroup___w_l_a_n_c_o_n_n_e_c_t_html_gaa131b2fb19e32077923852539b807a84"><div class="ttname"><a href="group___w_l_a_n_c_o_n_n_e_c_t.html#gaa131b2fb19e32077923852539b807a84">m2m_wifi_connect_psk</a></div><div class="ttdeci">int8_t m2m_wifi_connect_psk(tenuCredStoreOption enuCredStoreOption, tstrNetworkId *pstrNetworkId, tstrAuthPsk *pstrAuthPsk)</div><div class="ttdoc">Asynchronous API to connect to an access point using WPA(2) PSK authentication.</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/drv/driver/m2m_wifi.c:679</div></div>
<div class="ttc" id="astructtstr_m2_m_a_p_config_html_a39a98300948f1c568cbce5553d9bf2cc"><div class="ttname"><a href="structtstr_m2_m_a_p_config.html#a39a98300948f1c568cbce5553d9bf2cc">tstrM2MAPConfig::u8SecType</a></div><div class="ttdeci">uint8_t u8SecType</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2093</div></div>
<div class="ttc" id="astructtstr_m2_m_provision_info_html"><div class="ttname"><a href="structtstr_m2_m_provision_info.html">tstrM2MProvisionInfo</a></div><div class="ttdoc">M2M Provisioning Information obtained from the HTTP Provisioning server.</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2327</div></div>
<div class="ttc" id="agroup__m2m__wifi_html_ga13d5fa7a0c71fd59bbf36a61923835cc"><div class="ttname"><a href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">tstrWifiInitParam::pfAppWifiCb</a></div><div class="ttdeci">tpfAppWifiCb pfAppWifiCb</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_wifi.h:294</div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637"><div class="ttname"><a href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a></div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1250</div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede"><div class="ttname"><a href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4b4a55c41771f106a578b7253c63dede">M2M_WIFI_RESP_PROVISION_INFO</a></div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:830</div></div>
<div class="ttc" id="agroup___w_l_a_n_e_v_t_s_html_ga4f0db0a89400730ce569aa9e13a3108b"><div class="ttname"><a href="group___w_l_a_n_e_v_t_s.html#ga4f0db0a89400730ce569aa9e13a3108b">m2m_wifi_handle_events</a></div><div class="ttdeci">int8_t m2m_wifi_handle_events(void)</div><div class="ttdoc">Synchronous M2M event handler function.</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/drv/driver/m2m_wifi.c:497</div></div>
<div class="ttc" id="astructtstr_m2_m_provision_info_html_a86567fd47cad355ec37c9d8fdaa492b0"><div class="ttname"><a href="structtstr_m2_m_provision_info.html#a86567fd47cad355ec37c9d8fdaa492b0">tstrM2MProvisionInfo::au8SSID</a></div><div class="ttdeci">uint8_t au8SSID[M2M_MAX_SSID_LEN]</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2328</div></div>
<div class="ttc" id="astructtstr_m2_m_a_p_config_html_a53d040e4c4583692c8719506c3b1b090"><div class="ttname"><a href="structtstr_m2_m_a_p_config.html#a53d040e4c4583692c8719506c3b1b090">tstrM2MAPConfig::u8SsidHide</a></div><div class="ttdeci">uint8_t u8SsidHide</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2096</div></div>
<div class="ttc" id="agroup___w_l_a_n_c_o_n_n_e_c_t_html_ga39167bb6c3a20a24f46b387e7096d501"><div class="ttname"><a href="group___w_l_a_n_c_o_n_n_e_c_t.html#ga39167bb6c3a20a24f46b387e7096d501">m2m_wifi_connect</a></div><div class="ttdeci">int8_t m2m_wifi_connect(char *pcSsid, uint8_t u8SsidLen, uint8_t u8SecType, void *pvAuthInfo, uint16_t u16Ch)</div><div class="ttdoc">DEPRECATED in v19.6.1 - Kept only for legacy purposes.  Legacy asynchronous API to request connection...</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/drv/driver/m2m_wifi.c:918</div></div>
<div class="ttc" id="astructtstr_m2_m_a_p_mode_config_html_a6255dcc8c458d29c9ed628c51eb6b366"><div class="ttname"><a href="structtstr_m2_m_a_p_mode_config.html#a6255dcc8c458d29c9ed628c51eb6b366">tstrM2MAPModeConfig::strApConfigExt</a></div><div class="ttdeci">tstrM2MAPConfigExt strApConfigExt</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2149</div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_d_e_f_html_ga9ef27ba27aafdd1aa3a79d3ba2c36b8f"><div class="ttname"><a href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a></div><div class="ttdeci">#define M2M_SUCCESS</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/common/nm_common.h:48</div></div>
<div class="ttc" id="astructtstr_m2_m_a_p_config_html_af705ff369f7d0f49bec8b715704fa43e"><div class="ttname"><a href="structtstr_m2_m_a_p_config.html#af705ff369f7d0f49bec8b715704fa43e">tstrM2MAPConfig::au8SSID</a></div><div class="ttdeci">uint8_t au8SSID[M2M_MAX_SSID_LEN]</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2078</div></div>
<div class="ttc" id="astructtstr_network_id_html"><div class="ttname"><a href="structtstr_network_id.html">tstrNetworkId</a></div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_wifi.h:299</div></div>
<div class="ttc" id="astructtstr_auth_psk_html"><div class="ttname"><a href="structtstr_auth_psk.html">tstrAuthPsk</a></div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_wifi.h:327</div></div>
<div class="ttc" id="agroup___w_l_a_n_p_r_o_v_i_s_i_o_n_html_gacdde655475346d6c5d5983c8e159246e"><div class="ttname"><a href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#gacdde655475346d6c5d5983c8e159246e">m2m_wifi_start_provision_mode</a></div><div class="ttdeci">int8_t m2m_wifi_start_provision_mode(tstrM2MAPConfig *pstrM2MAPConfig, char *pcHttpServerDomainName, uint8_t bEnableHttpRedirect)</div><div class="ttdoc">Asynchronous API for control of Wi-Fi provisioning functionality.</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/drv/driver/m2m_wifi.c:1559</div></div>
<div class="ttc" id="agroup___w_l_a_n_p_r_o_v_i_s_i_o_n_html_ga150576e8996172d1ae24a7070eb527c3"><div class="ttname"><a href="group___w_l_a_n_p_r_o_v_i_s_i_o_n.html#ga150576e8996172d1ae24a7070eb527c3">m2m_wifi_start_provision_mode_ext</a></div><div class="ttdeci">int8_t m2m_wifi_start_provision_mode_ext(tstrM2MAPModeConfig *pstrAPModeConfig, char *pcHttpServerDomainName, uint8_t bEnableHttpRedirect)</div><div class="ttdoc">Asynchronous API for control of Wi-Fi provisioning functionality with extended options.</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/drv/driver/m2m_wifi.c:1572</div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga5669e8f0b3b645d5ece2519a33cf8c2ca6c7300873de793b2ca9342997d271ba7"><div class="ttname"><a href="group___wlan_enums.html#gga5669e8f0b3b645d5ece2519a33cf8c2ca6c7300873de793b2ca9342997d271ba7">WIFI_CRED_SAVE_ENCRYPTED</a></div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_wifi.h:212</div></div>
<div class="ttc" id="astructtstr_m2_m_a_p_config_html_ae0dad3f4c8fd8da56631dc7e40cac38b"><div class="ttname"><a href="structtstr_m2_m_a_p_config.html#ae0dad3f4c8fd8da56631dc7e40cac38b">tstrM2MAPConfig::au8DHCPServerIP</a></div><div class="ttdeci">uint8_t au8DHCPServerIP[4]</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2099</div></div>
<div class="ttc" id="astructtstr_m2_m_provision_info_html_a8cd72858f2c28a7e61099ff6b9d1196e"><div class="ttname"><a href="structtstr_m2_m_provision_info.html#a8cd72858f2c28a7e61099ff6b9d1196e">tstrM2MProvisionInfo::u8SecType</a></div><div class="ttdeci">uint8_t u8SecType</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2336</div></div>
<div class="ttc" id="astructtstr_m2_m_a_p_mode_config_html"><div class="ttname"><a href="structtstr_m2_m_a_p_mode_config.html">tstrM2MAPModeConfig</a></div><div class="ttdoc">AP Configuration.</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2144</div></div>
<div class="ttc" id="astructtstr_m2_m_a_p_config_html"><div class="ttname"><a href="structtstr_m2_m_a_p_config.html">tstrM2MAPConfig</a></div><div class="ttdoc">AP Configuration.</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2074</div></div>
<div class="ttc" id="astructtstr_m2_m_provision_info_html_ab65918f5a66700ed747500cb6556ac0f"><div class="ttname"><a href="structtstr_m2_m_provision_info.html#ab65918f5a66700ed747500cb6556ac0f">tstrM2MProvisionInfo::au8Password</a></div><div class="ttdeci">uint8_t au8Password[M2M_MAX_PSK_LEN]</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2332</div></div>
<div class="ttc" id="astructtstr_m2_m_a_p_config_ext_html_a30c942c4ebf37f534eac15a2076f161b"><div class="ttname"><a href="structtstr_m2_m_a_p_config_ext.html#a30c942c4ebf37f534eac15a2076f161b">tstrM2MAPConfigExt::au8DefRouterIP</a></div><div class="ttdeci">uint8_t au8DefRouterIP[4]</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2123</div></div>
<div class="ttc" id="astructtstr_m2_m_a_p_config_ext_html_a145716448cb905d55f9ca4187822799c"><div class="ttname"><a href="structtstr_m2_m_a_p_config_ext.html#a145716448cb905d55f9ca4187822799c">tstrM2MAPConfigExt::au8DNSServerIP</a></div><div class="ttdeci">uint8_t au8DNSServerIP[4]</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2126</div></div>
<div class="ttc" id="agroup___wlan_enums_html_ggaa232a09c953ec8200c13774f94107b05a81b513753be791c13b73d0b2d3639b69"><div class="ttname"><a href="group___wlan_enums.html#ggaa232a09c953ec8200c13774f94107b05a81b513753be791c13b73d0b2d3639b69">M2M_WIFI_SEC_OPEN</a></div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:1191</div></div>
<div class="ttc" id="astructtstr_wifi_init_param_html"><div class="ttname"><a href="structtstr_wifi_init_param.html">tstrWifiInitParam</a></div><div class="ttdoc">Structure, holding the Wi-fi configuration attributes such as the wi-fi callback ,...</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_wifi.h:293</div></div>
<div class="ttc" id="astructtstr_m2_m_a_p_config_html_a06e63e0e3973b60398e1c91edde75105"><div class="ttname"><a href="structtstr_m2_m_a_p_config.html#a06e63e0e3973b60398e1c91edde75105">tstrM2MAPConfig::u8ListenChannel</a></div><div class="ttdeci">uint8_t u8ListenChannel</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/include/drv/driver/m2m_types.h:2081</div></div>
<div class="ttc" id="agroup___w_l_a_n_i_n_i_t_html_ga66f5bf5f84f898bdd4453f2717a3deb5"><div class="ttname"><a href="group___w_l_a_n_i_n_i_t.html#ga66f5bf5f84f898bdd4453f2717a3deb5">m2m_wifi_init</a></div><div class="ttdeci">int8_t m2m_wifi_init(tstrWifiInitParam *pWifiInitParam)</div><div class="ttdoc">Synchronous API to initialize the WINC driver.</div><div class="ttdef"><b>Definition:</b> apps/ap_scan/firmware/src/config/sam_d21_xpro_winc1500/driver/winc/drv/driver/m2m_wifi.c:475</div></div>
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer">
  <span class="stringliteral"> © 2019 Microchip Technology Inc. </span>
</body>
</html>
