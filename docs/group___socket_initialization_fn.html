<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="generator" content="Doxygen 1.8.15"/>
  <title>Wireless - Harmony 3: socketInit</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="customstylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
 <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
 <div id="titlearea">
 <table cellspacing="0" cellpadding="0">
 <tbody>
   <tr style="height: 56px;vertical-align: text-bottom;">
    <td style="padding: 0.2em 0.5em 0.1em 0.5em;">
	  <a id="projectlogo"><img alt="Logo" src="Microchip_logo.png"/> </a> </td>
     <td style="padding-right: 1em;">
       <span id="projectname"/> <class="stringliteral">Wireless - Harmony 3 </span>
     </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">socketInit<div class="ingroups"><a class="el" href="group___socket_header.html">Socket</a> &#124; <a class="el" href="group___s_o_c_k_e_t_a_p_i.html">SOCKET</a> &raquo; <a class="el" href="group___socket_a_p_i.html">Function</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gadc1a241370d03a56c23bfb9ad8407ca2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___socket_initialization_fn.html#gadc1a241370d03a56c23bfb9ad8407ca2">socketInit</a> (void)</td></tr>
<tr class="separator:gadc1a241370d03a56c23bfb9ad8407ca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae86b3f9d161e298e7ed3c5707bd9ed1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___socket_initialization_fn.html#gaae86b3f9d161e298e7ed3c5707bd9ed1">socketDeinit</a> (void)</td></tr>
<tr class="memdesc:gaae86b3f9d161e298e7ed3c5707bd9ed1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Socket Layer De-initialization.  <a href="#gaae86b3f9d161e298e7ed3c5707bd9ed1">More...</a><br /></td></tr>
<tr class="separator:gaae86b3f9d161e298e7ed3c5707bd9ed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c1e3cd42becd18ae4d8d2c504ca72e5"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___socket_initialization_fn.html#ga4c1e3cd42becd18ae4d8d2c504ca72e5">IsSocketReady</a> (void)</td></tr>
<tr class="separator:ga4c1e3cd42becd18ae4d8d2c504ca72e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The function performs the necessary initializations for the socket library through the following steps:</p><ul>
<li>A check made by the global variable gbSocketInit, ensuring that initialization for sockets is performed only once, in-order to prevent resetting the socket instances already created in the global socket array (gastrSockets).</li>
<li>Zero initializations to the global socket array (gastrSockets), which holds the list of TCP sockets.</li>
<li>Registers the socket (Host Interface)hif callback function through the call to the hif_register_cb function. This facilitates handling all of the socket related functions received through interrupts from the firmware. </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4c1e3cd42becd18ae4d8d2c504ca72e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4c1e3cd42becd18ae4d8d2c504ca72e5">&#9670;&nbsp;</a></span>IsSocketReady()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t IsSocketReady </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___socket_initialization_fn.html#gadc1a241370d03a56c23bfb9ad8407ca2">socketInit</a> <a class="el" href="group___socket_initialization_fn.html#gaae86b3f9d161e298e7ed3c5707bd9ed1" title="Socket Layer De-initialization.">socketDeinit</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>If the socket has been initialized and is ready. Should return 1 after <a class="el" href="group___socket_initialization_fn.html#gadc1a241370d03a56c23bfb9ad8407ca2">socketInit</a> and 0 after <a class="el" href="group___socket_initialization_fn.html#gaae86b3f9d161e298e7ed3c5707bd9ed1">socketDeinit</a> </dd></dl>

</div>
</div>
<a id="gaae86b3f9d161e298e7ed3c5707bd9ed1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaae86b3f9d161e298e7ed3c5707bd9ed1">&#9670;&nbsp;</a></span>socketDeinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void socketDeinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Socket Layer De-initialization. </p>
<pre class="fragment">The function performs the necessary cleanup for the socket library static data
It must be invoked as the last any socket operation is performed on any active sockets.
</pre><pre class="fragment">The function performs the necessary cleanup for the socket library static data
It must be invoked only after all desired socket operations have been performed on any active sockets.
</pre> 
</div>
</div>
<a id="gadc1a241370d03a56c23bfb9ad8407ca2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadc1a241370d03a56c23bfb9ad8407ca2">&#9670;&nbsp;</a></span>socketInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void socketInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>This initialization function must be invoked before any socket operation is performed. No error codes from this initialization function since the socket array is statically allocated based in the maximum number of sockets <a class="el" href="group___i_p_defines.html#gac0ab6f439d003d912087974e24160b68">MAX_SOCKET</a> based on the systems capability. </dd></dl>
<h1><a class="anchor" id="socketinit"></a>
example</h1>
<p>This example demonstrates the use of the socketinit for socket initialization for an mqtt chat application. </p><div class="fragment"><div class="line"><a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div><div class="line"><a class="code" href="structtstr_network_id.html">tstrNetworkId</a>       strNetworkId;</div><div class="line"><a class="code" href="structtstr_auth_psk.html">tstrAuthPsk</a>         strAuthPsk;</div><div class="line">int8_t ret;</div><div class="line"><span class="keywordtype">char</span> topic[strlen(MAIN_CHAT_TOPIC) + MAIN_CHAT_USER_NAME_SIZE + 1];</div><div class="line"></div><div class="line"><span class="comment">//Initialize the board.</span></div><div class="line">system_init();</div><div class="line"></div><div class="line"><span class="comment">//Initialize the UART console.</span></div><div class="line">configure_console();</div><div class="line"></div><div class="line"><span class="comment">// Initialize the BSP.</span></div><div class="line">nm_bsp_init();</div><div class="line"></div><div class="line">----------</div><div class="line"></div><div class="line"><span class="comment">// Initialize socket interface.</span></div><div class="line"><a class="code" href="group___socket_initialization_fn.html#gadc1a241370d03a56c23bfb9ad8407ca2">socketInit</a>();</div><div class="line"><a class="code" href="group___socket_callback_fn.html#gaaf3c2b90b9ed63c030f688d08552bc8b">registerSocketCallback</a>(socket_event_handler, socket_resolve_handler);</div><div class="line"></div><div class="line"><span class="comment">// Connect to router.</span></div><div class="line">strNetworkId.<a class="code" href="structtstr_network_id.html#a42ae53b909fdf9fd820f585e43af3684">pu8Bssid</a> = NULL;</div><div class="line">strNetworkId.<a class="code" href="structtstr_network_id.html#a27511d3ec4f64d5468c4ba16ab35202f">pu8Ssid</a> = MAIN_WLAN_SSID;</div><div class="line">strNetworkId.<a class="code" href="structtstr_network_id.html#abae02d3da1db28d70939b1e9df05c21f">u8SsidLen</a> = <span class="keyword">sizeof</span>(MAIN_WLAN_SSID);</div><div class="line">strNetworkId.u8Channel = <a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>;</div><div class="line"></div><div class="line">strAuthPsk.<a class="code" href="structtstr_auth_psk.html#a8d52b0f260f033cd02a397d54461605b">pu8Psk</a> = NULL;</div><div class="line">strAuthPsk.<a class="code" href="structtstr_auth_psk.html#a922b4265a78b16a0d7d9215ef6f89f26">pu8Passphrase</a> = MAIN_WLAN_PSK;</div><div class="line">strAuthPsk.<a class="code" href="structtstr_auth_psk.html#ab8937ae7cd0bf98711aceee893ff3cdd">u8PassphraseLen</a> = (uint8_t)strlen((<span class="keywordtype">char</span>*)MAIN_WLAN_PSK);</div><div class="line"></div><div class="line"><a class="code" href="group___w_l_a_n_a_p_i.html#gaa131b2fb19e32077923852539b807a84">m2m_wifi_connect_psk</a>(<a class="code" href="group___wlan_enums.html#gga5669e8f0b3b645d5ece2519a33cf8c2ca6c7300873de793b2ca9342997d271ba7">WIFI_CRED_SAVE_ENCRYPTED</a>, &amp;strNetworkId, &amp;strAuthPsk);</div></div><!-- fragment --><p>The function performs the necessary initialization for the socket library through the following steps:</p><ul>
<li>A check made by the global variable gbSocketInit, ensuring that initialization for sockets is performed only once, in-order to prevent reseting the socket instances already created in the global socket array (gastrSockets).</li>
<li>Zero initializations to the global socket array (gastrSockets), which holds the list of TCP sockets.</li>
<li>Registers the socket (Host Interface)hif callback function through the call to the hif_register_cb function. This facilitates handling all of the socket related functions received through interrupts from the firmware.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>This initialization function must be invoked before any socket operation is performed. No error codes from this initialization function since the socket array is statically allocated based on the maximum number of sockets <a class="el" href="group___i_p_defines.html#gac0ab6f439d003d912087974e24160b68">MAX_SOCKET</a> which is tuned to the systems capability. </dd></dl>
<h1><a class="anchor" id="SocketExample1"></a>
Example</h1>
<p>This example demonstrates the use of the socketInit for socket initialization for an mqtt chat application. </p><div class="fragment"><div class="line"><a class="code" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a> param;</div><div class="line">int8_t ret;</div><div class="line"><span class="keywordtype">char</span> topic[strlen(MAIN_CHAT_TOPIC) + MAIN_CHAT_USER_NAME_SIZE + 1];</div><div class="line"></div><div class="line"><span class="comment">//Initialize the board.</span></div><div class="line">system_init();</div><div class="line"></div><div class="line"><span class="comment">//Initialize the UART console.</span></div><div class="line">configure_console();</div><div class="line"></div><div class="line"><span class="comment">// Initialize the BSP.</span></div><div class="line">nm_bsp_init();</div><div class="line"></div><div class="line"> ----------</div><div class="line"></div><div class="line"><span class="comment">// Initialize socket interface.</span></div><div class="line"><a class="code" href="group___socket_initialization_fn.html#gadc1a241370d03a56c23bfb9ad8407ca2">socketInit</a>();</div><div class="line"><a class="code" href="group___socket_callback_fn.html#gaaf3c2b90b9ed63c030f688d08552bc8b">registerSocketCallback</a>(socket_event_handler, socket_resolve_handler);</div><div class="line"></div><div class="line"><span class="comment">// Connect to router.</span></div><div class="line"><a class="code" href="group___w_l_a_n_a_p_i.html#ga39167bb6c3a20a24f46b387e7096d501">m2m_wifi_connect</a>((<span class="keywordtype">char</span> *)DEFAULT_SSID, <span class="keyword">sizeof</span>(DEFAULT_SSID),</div><div class="line">        DEFAULT_AUTH, (<span class="keywordtype">char</span> *)DEFAULT_KEY, <a class="code" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer">
  <span class="stringliteral"> © 2019 Microchip Technology Inc. </span>
</body>
</html>
