<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="generator" content="Doxygen 1.8.15"/>
  <title>Wireless - Harmony 3: socket</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="customstylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
 <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
 <div id="titlearea">
 <table cellspacing="0" cellpadding="0">
 <tbody>
   <tr style="height: 56px;vertical-align: text-bottom;">
    <td style="padding: 0.2em 0.5em 0.1em 0.5em;">
	  <a id="projectlogo"><img alt="Logo" src="Microchip_logo.png"/> </a> </td>
     <td style="padding-right: 1em;">
       <span id="projectname"/> <class="stringliteral">Wireless - Harmony 3 </span>
     </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">socket<div class="ingroups"><a class="el" href="group___socket_header.html">Socket</a> &#124; <a class="el" href="group___s_o_c_k_e_t_a_p_i.html">SOCKET</a> &raquo; <a class="el" href="group___socket_a_p_i.html">Function</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3af525e03c1d87e1c38bc80707cc96b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___socket_fn.html#ga3af525e03c1d87e1c38bc80707cc96b9">socket</a> (uint16_t u16Domain, uint8_t u8Type, uint8_t u8Flags)</td></tr>
<tr class="separator:ga3af525e03c1d87e1c38bc80707cc96b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Synchronous socket allocation function based on the specified socket type. Created sockets are non-blocking and their possible types are either TCP or a UDP sockets. The maximum allowed number of TCP sockets is <a class="el" href="group___i_p_defines.html#gab6c65ea312c8108924ada44302aa465f">TCP_SOCK_MAX</a> sockets while the maximum number of UDP sockets that can be created simultaneously is <a class="el" href="group___i_p_defines.html#gabbb22c156432dd303fe28b658ab8338d">UDP_SOCK_MAX</a> sockets. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3af525e03c1d87e1c38bc80707cc96b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3af525e03c1d87e1c38bc80707cc96b9">&#9670;&nbsp;</a></span>socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a> socket </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>u16Domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>u8Type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>u8Flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u16Domain</td><td>Socket family. The only allowed value is AF_INET (IPv4.0) for TCP/UDP sockets.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8Type</td><td>Socket type. Allowed values are:<ul>
<li><a class="el" href="group___i_p_defines.html#ga249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a></li>
<li><a class="el" href="group___i_p_defines.html#ga4db8b9a846c67404db0b6f014f9a9fdf">SOCK_DGRAM</a></li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8Flags</td><td>Used to specify the socket creation flags. It shall be set to zero for normal TCP/UDP sockets. It could be <a class="el" href="group___i_p_defines.html#gabba7069e08c6d3aa2f9029461d13498c">SOCKET_FLAGS_SSL</a> if the socket is used for SSL session. The use of the flag <a class="el" href="group___i_p_defines.html#gabba7069e08c6d3aa2f9029461d13498c">SOCKET_FLAGS_SSL</a> has no meaning in case of UDP sockets.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>The <a class="el" href="group___socket_initialization_fn.html#gadc1a241370d03a56c23bfb9ad8407ca2">socketInit</a> function must be called once at the beginning of the application to initialize the socket handler. before any call to the socket function can be made.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___socket_a_p_i.html#ga459851d89ff927827263db7a6e7a05b8">connect</a> <a class="el" href="group___socket_a_p_i.html#gaad1c6d98b22166914c734145e37e1b72">bind</a> <a class="el" href="group___socket_a_p_i.html#ga4294a09e9618e0505d6adbd7cb9b77e4">listen</a> <a class="el" href="group___socket_a_p_i.html#ga0f9d8979ab7f59930f48fe680a383336">accept</a> <a class="el" href="group___socket_a_p_i.html#gac6bf2ee6fc5c39550553c358a4228c2f">recv</a> <a class="el" href="group___socket_a_p_i.html#ga16804704d87511f43b63c8df9cb5c3b3">recvfrom</a> <a class="el" href="group___socket_a_p_i.html#gaba08fba03c021f095e1296fb4ca97c5c">send</a> <a class="el" href="group___socket_a_p_i.html#ga1d644d5d895c7264579f1ee3a7b8e42c">sendto</a> <a class="el" href="group___socket_a_p_i.html#gad86fd90d573b4e90789717f597f4af6a">shutdown</a> <a class="el" href="group___socket_a_p_i.html#ga8cba985747bde7a8236c1620c3f74f1b">setsockopt</a> <a class="el" href="group___socket_a_p_i.html#ga1f56e204df82390b9cdbb7ca8dc2e0d1">getsockopt</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>On successful socket creation, a non-blocking socket type is created and a socket ID is returned In case of failure the function returns a negative value, identifying one of the socket error codes defined. For example: <a class="el" href="group___socket_error_code.html#gaadbd3cd57b4ff7c25b6a9abc75cb37be">SOCK_ERR_INVALID</a> for invalid argument or <a class="el" href="group___socket_error_code.html#ga02b3df7adc7c06dd2fd82c14b4825a83">SOCK_ERR_MAX_TCP_SOCK</a> if the number of TCP allocated sockets exceeds the number of available sockets.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>The socket function must be called a priori to any other related socket functions "e.g. send, recv, shutdown  ..etc" </dd></dl>
<h1><a class="anchor" id="Socket"></a>
allocation example</h1>
<p>This example demonstrates the use of the socket function to allocate the socket, returning the socket handler to be used for other socket operations. Socket creation is dependent on the socket type.</p>
<p>UDP example</p>
<div class="fragment"><div class="line"><a class="code" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a> UdpServerSocket = -1;</div><div class="line"></div><div class="line">UdpServerSocket = <a class="code" href="group___socket_fn.html#ga3af525e03c1d87e1c38bc80707cc96b9">socket</a>(<a class="code" href="group___i_p_defines.html#ga9930604d0e32588eae76f43ca38e7826">AF_INET</a>, <a class="code" href="group___i_p_defines.html#ga4db8b9a846c67404db0b6f014f9a9fdf">SOCK_DGRAM</a>, 0);</div></div><!-- fragment --><p>TCP example</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a> tcp_client_socket = -1;</div><div class="line"></div><div class="line">tcp_client_socket = <a class="code" href="group___socket_fn.html#ga3af525e03c1d87e1c38bc80707cc96b9">socket</a>(<a class="code" href="group___i_p_defines.html#ga9930604d0e32588eae76f43ca38e7826">AF_INET</a>, <a class="code" href="group___i_p_defines.html#ga249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a>, 0));</div></div><!-- fragment --><p>SSL example</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a> ssl_socket = -1;</div><div class="line"></div><div class="line">ssl_socket = <a class="code" href="group___socket_fn.html#ga3af525e03c1d87e1c38bc80707cc96b9">socket</a>(<a class="code" href="group___i_p_defines.html#ga9930604d0e32588eae76f43ca38e7826">AF_INET</a>, <a class="code" href="group___i_p_defines.html#ga249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a>, SOCK_FLAGS_SSL));</div></div><!-- fragment --><p>Synchronous socket allocation function based on the specified socket type. Created sockets are non-blocking and their possible types are either TCP or a UDP sockets. The maximum allowed number of TCP sockets is <a class="el" href="group___i_p_defines.html#gab6c65ea312c8108924ada44302aa465f">TCP_SOCK_MAX</a> sockets while the maximum number of UDP sockets that can be created simultaneously is <a class="el" href="group___i_p_defines.html#gabbb22c156432dd303fe28b658ab8338d">UDP_SOCK_MAX</a> sockets.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u16Domain</td><td>Socket family. The only allowed value is AF_INET (IPv4.0) for TCP/UDP sockets.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8Type</td><td>Socket type. Allowed values are:<ul>
<li><a class="el" href="group___i_p_defines.html#ga249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a></li>
<li><a class="el" href="group___i_p_defines.html#ga4db8b9a846c67404db0b6f014f9a9fdf">SOCK_DGRAM</a></li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8Flags</td><td>Used to specify the socket creation flags. It shall be set to zero for normal TCP/UDP sockets, or <a class="el" href="group___i_p_defines.html#gabba7069e08c6d3aa2f9029461d13498c">SOCKET_FLAGS_SSL</a> if the socket is used for SSL session. The use of the flag <a class="el" href="group___i_p_defines.html#gabba7069e08c6d3aa2f9029461d13498c">SOCKET_FLAGS_SSL</a> has no meaning in case of UDP sockets.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>The <a class="el" href="group___socket_initialization_fn.html#gadc1a241370d03a56c23bfb9ad8407ca2">socketInit</a> function must be called once at the beginning of the application to initialize the socket handler. before any call to the socket function can be made.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___socket_a_p_i.html#ga459851d89ff927827263db7a6e7a05b8">connect</a> <a class="el" href="group___socket_a_p_i.html#gaad1c6d98b22166914c734145e37e1b72">bind</a> <a class="el" href="group___socket_a_p_i.html#ga4294a09e9618e0505d6adbd7cb9b77e4">listen</a> <a class="el" href="group___socket_a_p_i.html#ga0f9d8979ab7f59930f48fe680a383336">accept</a> <a class="el" href="group___socket_a_p_i.html#gac6bf2ee6fc5c39550553c358a4228c2f">recv</a> <a class="el" href="group___socket_a_p_i.html#ga16804704d87511f43b63c8df9cb5c3b3">recvfrom</a> <a class="el" href="group___socket_a_p_i.html#gaba08fba03c021f095e1296fb4ca97c5c">send</a> <a class="el" href="group___socket_a_p_i.html#ga1d644d5d895c7264579f1ee3a7b8e42c">sendto</a> <a class="el" href="group___socket_a_p_i.html#gad86fd90d573b4e90789717f597f4af6a">shutdown</a> <a class="el" href="group___socket_a_p_i.html#ga8cba985747bde7a8236c1620c3f74f1b">setsockopt</a> <a class="el" href="group___socket_a_p_i.html#ga1f56e204df82390b9cdbb7ca8dc2e0d1">getsockopt</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>On successful socket creation, a non-blocking socket type is created and a socket ID is returned In case of failure the function returns a negative value, identifying one of the socket error codes defined. For example: <a class="el" href="group___socket_error_code.html#gaadbd3cd57b4ff7c25b6a9abc75cb37be">SOCK_ERR_INVALID</a> for invalid argument or <a class="el" href="group___socket_error_code.html#ga02b3df7adc7c06dd2fd82c14b4825a83">SOCK_ERR_MAX_TCP_SOCK</a> if the number of TCP allocated sockets exceeds the number of available sockets.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>The socket function must be called before any other related socket functions "e.g. send, recv, shutdown ..etc" </dd></dl>
<h1><a class="anchor" id="SocketExample3"></a>
Example</h1>
<p>This example demonstrates the use of the socket function to allocate the socket, returning the socket handler to be used for other socket operations. Socket creation is dependent on the socket type. </p>
<h2><a class="anchor" id="sub1"></a>
UDP example</h2>
<div class="fragment"><div class="line"><a class="code" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a> UdpServerSocket = -1;</div><div class="line"></div><div class="line">UdpServerSocket = <a class="code" href="group___socket_fn.html#ga3af525e03c1d87e1c38bc80707cc96b9">socket</a>(<a class="code" href="group___i_p_defines.html#ga9930604d0e32588eae76f43ca38e7826">AF_INET</a>, <a class="code" href="group___i_p_defines.html#ga4db8b9a846c67404db0b6f014f9a9fdf">SOCK_DGRAM</a>, 0);</div></div><!-- fragment --> <h2><a class="anchor" id="sub2"></a>
TCP example</h2>
<div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a> tcp_client_socket = -1;</div><div class="line"></div><div class="line">tcp_client_socket = <a class="code" href="group___socket_fn.html#ga3af525e03c1d87e1c38bc80707cc96b9">socket</a>(<a class="code" href="group___i_p_defines.html#ga9930604d0e32588eae76f43ca38e7826">AF_INET</a>, <a class="code" href="group___i_p_defines.html#ga249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a>, 0));</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer">
  <span class="stringliteral"> © 2019 Microchip Technology Inc. </span>
</body>
</html>
