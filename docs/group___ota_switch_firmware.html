<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=9"/>
  <meta name="generator" content="Doxygen 1.8.16"/>
  <title>Harmony 3 : Wireless: m2m_ota_switch_firmware</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
  <link href="customstylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
 <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
 <div id="titlearea">
 <table cellspacing="0" cellpadding="0">
 <tbody>
   <tr style="height: 56px;vertical-align: text-bottom;">
    <td style="padding: 0.2em 0.5em 0.1em 0.5em;">
	  <a id="projectlogo"><img alt="Logo" src="Microchip_logo.png"/> </a> </td>
     <td style="padding-right: 1em;">
       <span id="projectname"/> <class="stringliteral">Harmony 3 : Wireless </span>
     </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">m2m_ota_switch_firmware<div class="ingroups"><a class="el" href="group__m2m__wifi.html">WLAN</a> &raquo; <a class="el" href="group___w_l_a_n_a_p_i.html">Functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga24e44fbce7ca42ded0e1daa500c40ca8"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ota_switch_firmware.html#ga24e44fbce7ca42ded0e1daa500c40ca8">m2m_ota_switch_firmware</a> (void)</td></tr>
<tr class="memdesc:ga24e44fbce7ca42ded0e1daa500c40ca8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch to the upgraded Firmware.  <a href="group___ota_switch_firmware.html#ga24e44fbce7ca42ded0e1daa500c40ca8">More...</a><br /></td></tr>
<tr class="separator:ga24e44fbce7ca42ded0e1daa500c40ca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacec240868c32daeb9c4dfbda209f0eb1"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ota_switch_firmware.html#gacec240868c32daeb9c4dfbda209f0eb1">m2m_ota_switch_crt</a> (void)</td></tr>
<tr class="memdesc:gacec240868c32daeb9c4dfbda209f0eb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch to the upgraded cortus application.  <a href="group___ota_switch_firmware.html#gacec240868c32daeb9c4dfbda209f0eb1">More...</a><br /></td></tr>
<tr class="separator:gacec240868c32daeb9c4dfbda209f0eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3816492fb5b4c815f703a7562b0c11fd"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ota_switch_firmware.html#ga3816492fb5b4c815f703a7562b0c11fd">m2m_ota_get_firmware_version</a> (<a class="el" href="structtstr_m2m_rev.html">tstrM2mRev</a> *pstrRev)</td></tr>
<tr class="memdesc:ga3816492fb5b4c815f703a7562b0c11fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the OTA Firmware version.  <a href="group___ota_switch_firmware.html#ga3816492fb5b4c815f703a7562b0c11fd">More...</a><br /></td></tr>
<tr class="separator:ga3816492fb5b4c815f703a7562b0c11fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Switch to the upgraded Firmware, that API will update the control structure working image to the upgraded image take effect will be on the next system restart</p>
<p>Switch to the upgraded cortus application, that API will update the control structure working image to the upgraded image take effect will be on the next system restart </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3816492fb5b4c815f703a7562b0c11fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3816492fb5b4c815f703a7562b0c11fd">&#9670;&nbsp;</a></span>m2m_ota_get_firmware_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t m2m_ota_get_firmware_version </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtstr_m2m_rev.html">tstrM2mRev</a> *&#160;</td>
          <td class="paramname"><em>pstrRev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the OTA Firmware version. </p>
<p>Synchronous API to obtain the firmware version of the WINC image that is stored in the inactive flash partition. This is the image that would run on the WINC if <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#ga24e44fbce7ca42ded0e1daa500c40ca8">m2m_ota_switch_firmware</a> or <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#gad238a0b0d9218b8db10d82a95fc91dad">m2m_ota_rollback</a> were called, followed by a reset of the WINC.</p>
<p>Synchronous API to obtain the firmware version of the WINC image that is stored in the inactive flash partition. This is the image that would run on the WINC IC if <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#ga24e44fbce7ca42ded0e1daa500c40ca8">m2m_ota_switch_firmware</a> or <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#gad238a0b0d9218b8db10d82a95fc91dad">m2m_ota_rollback</a> were called, followed by a reset of the WINC IC.</p>
<dl class="section return"><dt>Returns</dt><dd>The function SHALL return 0 for success and a negative value otherwise.</dd></dl>
<p>Get OTA Firmware version info from the inactive partition, as defined in the structure <a class="el" href="structtstr_m2m_rev.html" title="Structure holding firmware version parameters and build date/time.">tstrM2mRev</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pstrRev</td><td>Pointer to the structure <a class="el" href="structtstr_m2m_rev.html" title="Structure holding firmware version parameters and build date/time.">tstrM2mRev</a> that contains the firmware version parameters. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for successful operations and a negative value otherwise.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pstrRev</td><td>pointer holds address of structure "tstrM2mRev" that contains the ota fw version parameters</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function SHALL return <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for success and a negative value otherwise.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pstrRev</td><td>Pointer to variable of type <a class="el" href="structtstr_m2m_rev.html">tstrM2mRev</a> which contains the ota fw version parameters.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for success and a negative value otherwise. </dd></dl>

</div>
</div>
<a id="gacec240868c32daeb9c4dfbda209f0eb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacec240868c32daeb9c4dfbda209f0eb1">&#9670;&nbsp;</a></span>m2m_ota_switch_crt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t m2m_ota_switch_crt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Switch to the upgraded cortus application. </p>
<dl class="section return"><dt>Returns</dt><dd>The function SHALL return 0 for success and a negative value otherwise. </dd></dl>

</div>
</div>
<a id="ga24e44fbce7ca42ded0e1daa500c40ca8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga24e44fbce7ca42ded0e1daa500c40ca8">&#9670;&nbsp;</a></span>m2m_ota_switch_firmware()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t m2m_ota_switch_firmware </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Switch to the upgraded Firmware. </p>
<p>Request switch to the updated WINC image. The WINC firmware will check the validity of the inactive image and activate it if valid. On completion, a callback of type <a class="el" href="group___o_t_a_t_y_p_e_d_e_f.html#gaf345fdfae1cf9ce618873bb9ce7f3045">tpfOtaUpdateCb</a> is called (application must previously have provided the callback via <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#ga80058af2f37ab262dbc1b5f5327708f7">m2m_ota_init</a>). If the callback indicates successful activation, the newly-activated image will start running after next system reset.</p>
<p>Request switch to the updated WINC image. The WINC firmware will check the validity of the inactive image and activate it if it is valid. On completion, a callback of type <a class="el" href="group___o_t_a_t_y_p_e_d_e_f.html#gaf345fdfae1cf9ce618873bb9ce7f3045">tpfOtaUpdateCb</a> is called (application must previously have provided the callback via <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#ga80058af2f37ab262dbc1b5f5327708f7">m2m_ota_init</a>). If the callback indicates successful activation, the newly-activated image will start running after next system reset.</p>
<dl class="section return"><dt>Returns</dt><dd>The function SHALL return 0 for success and a negative value otherwise.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>If switch will necessitate a host driver update in order to maintain HIF compatibility (HIF major value change), then it is recommended to update the host driver prior to calling this API.<br  />
 In the event of system reset with incompatible driver/firmware, compatibility can be recovered by calling <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#gad238a0b0d9218b8db10d82a95fc91dad">m2m_ota_rollback</a> or <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#ga24e44fbce7ca42ded0e1daa500c40ca8">m2m_ota_switch_firmware</a>.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___ota_init_fn.html#ga87960f1beeaec73ede1283ae058bfa39" title="Initialize the OTA layer.">m2m_ota_init</a> <a class="el" href="group___ota_start_updatefn.html#ga38a82b1bc3c43d3e48f8c4956b191ab1" title="Request OTA start update using the downloaded url.">m2m_ota_start_update</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for successful operations and a negative value otherwise.</dd>
<dd>
The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for success and a negative value otherwise.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>If switch requires a host driver update in order to maintain HIF compatibility (HIF major value change), then it is recommended to update the host driver prior to calling this API.<br  />
 In the event of system reset with incompatible driver/firmware, compatibility can be recovered by calling <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#gad238a0b0d9218b8db10d82a95fc91dad">m2m_ota_rollback</a> or <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#ga24e44fbce7ca42ded0e1daa500c40ca8">m2m_ota_switch_firmware</a>. See <a class="el" href="group___ota_start_updatefn.html#OTAExample">Example</a>.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___ota_init_fn.html#ga87960f1beeaec73ede1283ae058bfa39" title="Initialize the OTA layer.">m2m_ota_init</a> <a class="el" href="group___ota_start_updatefn.html#ga38a82b1bc3c43d3e48f8c4956b191ab1" title="Request OTA start update using the downloaded url.">m2m_ota_start_update</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for successful operations and a negative value otherwise.</dd></dl>
<p>Request switch to the updated WINC image. The WINC firmware will check the validity of the inactive image and activate it if it is valid. On completion, a callback of type <a class="el" href="group___o_t_a_t_y_p_e_d_e_f.html#gaf345fdfae1cf9ce618873bb9ce7f3045">tpfOtaUpdateCb</a> is called (application must previously have provided the callback via <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#ga08275ebf9834c5223311bc8ae9627959">m2m_ota_init()</a>). If the callback indicates successful activation, the newly-activated image will start running after next system reset.</p>
<dl class="section warning"><dt>Warning</dt><dd>If switch will necessitate a host driver update in order to maintain HIF compatibility (HIF major value change), then it is recommended to update the host driver prior to calling this API. In the event of system reset with incompatible driver/firmware, compatibility can be recovered by calling <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#gad238a0b0d9218b8db10d82a95fc91dad">m2m_ota_rollback</a> or <a class="el" href="group___o_t_a_f_u_n_c_t_i_o_n_s.html#ga24e44fbce7ca42ded0e1daa500c40ca8">m2m_ota_switch_firmware</a>. See <a class="el" href="group___ota_start_updatefn.html#OTAExample">Example</a>.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___ota_init_fn.html#ga87960f1beeaec73ede1283ae058bfa39" title="Initialize the OTA layer.">m2m_ota_init</a> <a class="el" href="group___ota_start_updatefn.html#ga38a82b1bc3c43d3e48f8c4956b191ab1" title="Request OTA start update using the downloaded url.">m2m_ota_start_update</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for successful operations and a negative value otherwise.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>It is important to note that if the API succeeds, system restart is required (re-initializing the driver with hardware reset) updating the host driver version may be required if it does not match the minimum driver version supported by the WINC's firmware. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___ota_init_fn.html#ga87960f1beeaec73ede1283ae058bfa39" title="Initialize the OTA layer.">m2m_ota_init</a> <a class="el" href="group___ota_start_updatefn.html#ga38a82b1bc3c43d3e48f8c4956b191ab1" title="Request OTA start update using the downloaded url.">m2m_ota_start_update</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for successful operations and a negative value otherwise.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>It is important to note that if the API succeeds, system restart is required (re-initializing the driver with hardware reset) updating the host driver version may be required if it does not match the minimum driver version supported by the WINC's firmware. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___ota_init_fn.html#ga87960f1beeaec73ede1283ae058bfa39" title="Initialize the OTA layer.">m2m_ota_init</a> <a class="el" href="group___ota_start_updatefn.html#gaf1e631145f9a203642f877b002b2c306" title="Request OTA start for the Cortus app image.">m2m_ota_start_update_crt</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for successful operations and a negative value otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer">
  <span class="stringliteral"> © 2019 Microchip Technology Inc. </span>
</body>
</html>
